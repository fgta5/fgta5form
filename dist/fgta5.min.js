let t=0;class e{Id;Element;constructor(t){null!=t&&(this.Id=t,this.Element=document.getElementById(t))}addEventListener(t,e){this.Element.addEventListener(t,e)}static GenerateId(){return"comp-"+ ++t}}class n extends e{EditingMode=!1;constructor(t){super(t)}get Type(){return this.constructor.name}get Value(){return this.Element.value}set Value(t){this.Element.value=t}get Disabled(){return this.Element.disabled}set Disabled(t){this.Element.disabled=t}#t;get Form(){return this.#t}set Form(t){this.#t=t}SetEditingMode(t){}SetError(t){}GetLastValue(){}Validate(){return!0}}class s extends n{constructor(t){super(t),function(t){const e=t.Element,n=document.createElement("div"),s=document.createElement("div"),i=document.querySelector(`label[for="${t.Id}"]`);t.Wrapper=s,t.Label=i,e.classList.add("fgta5-textbox"),e.parentNode.insertBefore(s,e),s.appendChild(e),s.classList.add("fgta5-wrapper-textbox"),s.parentNode.insertBefore(n,s),n.appendChild(s),n.classList.add("fgta5-input-container"),e.addEventListener("change",(e=>{t.Validate()||e.stopImmediatePropagation()}))}(this)}SetEditingMode(t){!function(t,e){const n=t.Element,s=t.Wrapper;t.EditingMode=e,e?(n.classList.add("fgta5-input-editmode"),n.readOnly=!1,s.removeAttribute("readonly")):(n.classList.remove("fgta5-input-editmode"),n.readOnly=!0,s.setAttribute("readonly","true"))}(this,t)}SetError(t){!function(t,e){const n=t.Element,s=t.Wrapper;var i=e;void 0===e?i=n.getAttribute("errormessage"):null===e&&(i=null);if(i){n.setAttribute("error",i),n.classList.add("fgta5-input-error"),s.classList.add("fgta5-input-error"),(a=s.parentNode.querySelector(".fgta5-errormessage"))||((a=document.createElement("div")).innerText=i,a.classList.add("fgta5-errormessage"),s.parentNode.appendChild(a))}else{var a;n.setAttribute("error",null),n.classList.remove("fgta5-input-error"),s.classList.remove("fgta5-input-error"),(a=s.parentNode.querySelector(".fgta5-errormessage"))&&a.parentNode.removeChild(a)}}(this,t)}Validate(){return function(t){const e=t.Element;t.Wrapper;const n=t.Label;var s=e.getAttribute("minlength"),i=e.getAttribute("maxlength"),a=(e.getAttribute("validator"),e.getAttribute("invalid")),r=null!=e.getAttribute("required"),d=null==t.Value||""==t.Value,o=n?n.innerText:null;try{if(r&&d){var l=null!=a?a:`field ${o} is required`;throw new Error(l)}if(!function(t,e,n){return!(e&&t.length<e||n&&t.length>n)}(t.Value,s,i)){l=null!=a?a:`field ${o} must be at least ${s} and maximum ${i} characters long`;throw new Error(l)}if(l=void t.Value)throw new Error(l);return t.SetError(null),!0}catch(e){return t.SetError(e.message),!1}}(this)}}class i{static Show(t){return a()}static Mask(t){return function(t,e){const n=a();return n.innerHTML=e,n}(0,t)}static Progress(t){return function(t,e){void 0===e&&(e={});const n=a();n.IsError=!1;var s=document.createElement("div");n.appendChild(s);var i=document.createElement("div");i.classList.add("fgta5-progressbar-container"),n.appendChild(i);var r=document.createElement("label");r.classList.add("fgta5-progressbar"),i.appendChild(r);var d=document.createElement("div");return d.classList.add("fgta5-progressbar-text"),n.appendChild(d),n.setProgress=function(t,e){t>100&&(t=100),r.innerHTML=`${t}%`,r.style.width=`${t}%`,d.innerHTML=e},n.setError=function(t){n.IsError=!0,s.classList.add("fgta5-messagebox-icon-error"),s.style.height="32px",s.style.marginBottom="10px",d.innerHTML=t,d.setAttribute("error","true"),r.setAttribute("error","true")},n.finish=function(t,s){if(void 0===t&&(t="Done"),void 0===s&&(s=!0),!0===e.buttonClose||n.IsError){s&&(d.style.display="none",r.style.width="100%",r.innerHTML="100%");var i=document.createElement("div");i.style.textAlign="center",i.style.marginTop="10px",i.style.marginBottom="0";var a=document.createElement("button");a.classList.add("fgta5-dialog-button"),a.innerHTML=t,a.addEventListener("click",(()=>{n.close()})),i.appendChild(a),n.appendChild(i)}else n.close()},n}(0,t)}}function a(){const t=document.createElement("dialog");return t.classList.add("fgta5-dialog"),t.addEventListener("close",(e=>{t.parentNode.removeChild(t)})),document.body.appendChild(t),t.showModal(),t}class r extends n{constructor(t){super(t),function(t){const e=document.createElement("div"),n=t.Element,s=document.querySelector(`label[for="${t.Id}"]`),a=document.createElement("input"),r=document.createElement("button"),d=document.createElement("div");t.Display=a,t.Button=r,t.Wrapper=d,t.Label=s,n.setAttribute("type","hidden"),n.classList.add("fgta5-combobox-value"),n.parentNode.insertBefore(d,n),a.setAttribute("id",`${t.Id}-display`),a.setAttribute("type","text"),a.setAttribute("readonly",!0),a.setAttribute("autocomplete","off"),a.setAttribute("spellcheck","false"),a.setAttribute("placeholder",t.Element.getAttribute("placeholder"));for(const t of n.classList)n.classList.remove(t),a.classList.add(t);a.classList.add("fgta5-combobox-display"),s.setAttribute("for",`${t.Id}-display`),r.setAttribute("type","button"),r.classList.add("fgta5-combobox-button"),r.innerHTML='<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="5" stroke-linecap="round" stroke-linejoin="round" transform="translate(0 3)"><path d="M6 9l6 6 6-6"/></svg>',r.addEventListener("click",(()=>{!function(t){void 0===t.Dialog&&(t.Dialog=new i);var e=t.Dialog;e.ShowModal()}(t)})),d.append(n),d.appendChild(a),d.appendChild(r),d.classList.add("fgta5-wrapper-textbox"),d.parentNode.insertBefore(e,d),e.appendChild(d),e.classList.add("fgta5-input-container")}(this)}get Value(){return this.Element.value}set Value(t){this.Element.value=t}get Disabled(){return this.Element.disabled}set Disabled(t){var e;this.Element.disabled=t,e=this,t?(e.Display.setAttribute("disabled",!0),e.Display.classList.add("fgta5-combobox-display-disabled"),e.Button.classList.add("fgta5-combobox-button-disabled")):(e.Display.removeAttribute("disabled"),e.Display.classList.remove("fgta5-datepicker-display-disabled"),e.Button.classList.remove("fgta5-datepicker-button-disabled"))}SetEditingMode(t){!function(t,e){if(t.EditingMode=e,t.Button.disabled)return;e?(t.Display.classList.add("fgta5-input-editmode"),t.Wrapper.removeAttribute("readonly"),t.Button.style.visibility="visible"):(t.Display.classList.remove("fgta5-input-editmode"),t.Wrapper.setAttribute("readonly","true"),t.Button.style.visibility="hidden")}(this,t)}}class d extends n{constructor(t){super(t),function(t){const e=document.createElement("div"),n=t.Element,s=document.querySelector(`label[for="${t.Id}"]`),i=document.createElement("input"),a=document.createElement("button"),r=document.createElement("div");t.Display=i,t.Button=a,t.Wrapper=r,t.Label=s,n.setAttribute("type","date"),n.classList.add("fgta5-datepicker-value"),n.parentNode.insertBefore(r,n),n.onchange=e=>{!function(t,e){const[n,s,i]=e.split("-");t.Display.value=`${i}/${s}/${n}`}(t,e.target.value)},i.setAttribute("id",`${t.Id}-display`),i.setAttribute("type","text"),i.setAttribute("readonly",!0),i.setAttribute("autocomplete","off"),i.setAttribute("spellcheck","false"),i.setAttribute("placeholder",t.Element.getAttribute("placeholder")),i.classList.add("fgta5-datepicker-display"),s.setAttribute("for",`${t.Id}-display`),a.setAttribute("type","button"),a.classList.add("fgta5-datepicker-button"),a.innerHTML='<svg transform="translate(0 3)" width="12" height="12" stroke="currentColor" stroke-linecap="round" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n\t\t<rect x="1.3095" y="6.6682" width="21.393" height="1.8579" fill="none" stroke-width="2"/>\n\t\t<rect x=".81949" y="10" width="22.341" height="13.251" fill="none" stroke-width="1.02"/>\n\t\t<rect x="3.8664" y="1.1531" width="2.5776" height="1.4923" fill="none" stroke-width="2"/>\n\t\t<rect x="17.223" y="1.1203" width="2.5776" height="1.6958" fill="none" stroke-width="2"/>\n\t\t<path d="m1.2888 16.278 21.367-0.13566" fill="none" stroke-width="1.02"/>\n\t\t<path d="m8.2775 10.07-0.13566 12.888" fill="none" stroke-width="1.02"/>\n\t\t<path d="m15.799 9.9671-0.13566 12.888" fill="none" stroke-width="1.02"/>\n\t\t</svg>',a.appendChild(n),a.addEventListener("click",(()=>{})),r.appendChild(i),r.appendChild(a),r.classList.add("fgta5-wrapper-textbox"),r.parentNode.insertBefore(e,r),e.appendChild(r),e.classList.add("fgta5-input-container")}(this)}get Value(){return this.Element.value}set Value(t){this.Element.value=t}get Disabled(){return this.Element.disabled}set Disabled(t){var e;this.Element.disabled=t,e=this,t?(e.Display.setAttribute("disabled",!0),e.Display.classList.add("fgta5-datepicker-display-disabled"),e.Button.classList.add("fgta5-datepicker-button-disabled")):(e.Display.removeAttribute("disabled"),e.Display.classList.remove("fgta5-datepicker-display-disabled"),e.Button.classList.remove("fgta5-datepicker-button-disabled"))}SetEditingMode(t){!function(t,e){if(t.EditingMode=e,t.Button.disabled)return;e?(t.Display.classList.add("fgta5-input-editmode"),t.Wrapper.removeAttribute("readonly"),t.Button.style.visibility="visible"):(t.Display.classList.remove("fgta5-input-editmode"),t.Wrapper.setAttribute("readonly","true"),t.Button.style.visibility="hidden")}(this,t)}}const o={info:"fgta5-messagebox-icon-info",warning:"fgta5-messagebox-icon-warning",error:"fgta5-messagebox-icon-error",question:"fgta5-messagebox-icon-question"};class l{Text="button";constructor(t){this.Text=t}}async function c(t,e,n){void 0===n&&(n={});var s=function(t,e,n){const s=document.createElement("dialog");if(s.classList.add("fgta5-messagebox-dialog"),s.addEventListener("close",(t=>{s.parentNode.removeChild(s)})),n.title&&(s.divTitle=document.createElement("div"),s.divTitle.classList.add("fgta5-messagebox-title"),s.divTitle.innerHTML=n.title,s.appendChild(s.divTitle)),n.iconcss){var i=o[n.iconcss]?o[n.iconcss]:n.iconcss;s.divIcon=document.createElement("div"),s.divIcon.classList.add("fgta5-messagebox-icon"),s.divIcon.classList.add(i),s.appendChild(s.divIcon)}return s.divContent=document.createElement("div"),s.divContent.classList.add("fgta5-messagebox-content"),s.divContent.innerHTML=e,s.appendChild(s.divContent),s.divButtons=document.createElement("div"),s.divButtons.classList.add("fgta5-messagebox-buttonsbar"),s.appendChild(s.divButtons),document.body.appendChild(s),s}(0,e,n);return new Promise((t=>{if(n.buttons)for(const[e,i]of Object.entries(n.buttons)){const n=document.createElement("button");n.classList.add("fgta5-messagebox-button"),n.innerHTML=i.Text,n.addEventListener("click",(()=>{s.close(),t(e)})),s.divButtons.appendChild(n)}else{const e=document.createElement("button");e.classList.add("fgta5-messagebox-button"),e.innerHTML="Ok",e.addEventListener("click",(()=>{s.close(),t("ok")})),s.divButtons.appendChild(e)}s.showModal()}))}const u={Component:e,Form:class extends e{Inputs={};Locked=!1;constructor(t){super(t),function(t,e){t.Id=e,t.Element=document.getElementById(e),t.Inputs={},t.Element.addEventListener("submit",(t=>{t.preventDefault()}));for(var n=t.Element.querySelectorAll("input"),i=0;i<n.length;i++){var a=n[i],o=a.getAttribute("fgta5-component");null!=o&&null!=a.id&&""!=a.id&&("Textbox"==o?t.Inputs[a.id]=new s(a.id):"Combobox"==o?t.Inputs[a.id]=new r(a.id):"Datepicker"==o&&(t.Inputs[a.id]=new d(a.id)))}}(this,t)}Lock(t){!function(t,e){const n=new CustomEvent("locked"),s=new CustomEvent("unlocked");t.Locked=e;var i=!t.Locked;for(var a in t.Inputs){t.Inputs[a].SetEditingMode(i)}e?t.Element.dispatchEvent(n):t.Element.dispatchEvent(s)}(this,t)}Reset(){}AcceptChanges(){}IsChanged(){return!0}IsLocked(){return this.Locked}NewData(){}Render(){var t;"true"===(t=this).Element.getAttribute("locked").toLowerCase()&&t.Lock(!0)}Validate(){return function(t){var e=!0;for(var n in t.Inputs){var s=t.Inputs[n];e&&=s.Validate()}return e}(this)}},Button:class extends e{constructor(t){var e;super(t),(e=this).Element.classList.add("fgta5-button"),e.Element.setAttribute("type","button")}#e=!1;get Disabled(){return this.#e}set Disabled(t){var e;this.#e=t,e=t,this.Element.disabled=e}},Textbox:s,Combobox:r,Datepicker:d,MessageBox:class{static async Show(t,e){return await c(this,t,e)}static async Error(t){return await async function(t,e){return await c(t,e,{iconcss:"error"})}(this,t)}static async Info(t){return await async function(t,e){return await c(t,e,{iconcss:"info"})}(this,t)}static async Warning(t){return await async function(t,e){return await c(t,e,{iconcss:"warning"})}(this,t)}static async Confirm(t){return await async function(t,e){return await c(t,e,{iconcss:"question",buttons:{ok:new l("Ok"),cancel:new l("Cancel")}})}(this,t)}},MessageBoxButton:l,Dialog:i};export{u as default};
