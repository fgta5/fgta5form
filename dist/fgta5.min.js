let t=0;class e{Id;Element;constructor(t){null!=t&&(this.Id=t,this.Element=document.getElementById(t))}addEventListener(t,e){this.Element.addEventListener(t,e)}static GenerateId(){return"comp-"+ ++t}}class n extends e{constructor(t){super(t)}get Type(){return this.constructor.name}get Value(){return this.Element.value}set Value(t){this.Element.value=t}get Disabled(){return this.Element.disabled}set Disabled(t){this.Element.disabled=t}#t;get Form(){return this.#t}bindForm(t){this.#t=t}#e=!0;get InEditMode(){return this.#e}SetEditingMode(t){this.#e=t}NewData(){}AcceptChanges(){}Reset(){}IsChanged(){return!1}SetError(t){}GetLastValue(){}Validate(){return!0}#n=[];get Validators(){return this.#n}AddValidator(t){-1===this.#n.indexOf(t)&&this.#n.push(t)}RemoveValidator(t){var e=this.#n.indexOf(t);-1!==e&&this.#n.splice(e,1)}}class s extends n{constructor(t){super(t),function(t){const e=document.createElement("div"),n=document.createElement("div"),s=t.Element,a=document.createElement("input");e.classList.add("fgta5-entry-container"),n.classList.add("fgta5-entry-input-wrapper"),s.classList.add("fgta5-entry-input"),a.classList.add("fgta5-entry-lastvalue"),s.parentNode.insertBefore(e,s),e.appendChild(n),n.appendChild(s),e.appendChild(a),a.setAttribute("type","hidden"),s.addEventListener("input",(function(e){t.Nodes.LastValue.value!=s.value?s.setAttribute("changed","true"):s.removeAttribute("changed")})),t.Nodes={Container:e,InputWrapper:n,Input:s,LastValue:a}}(this),function(t){var e=t.Element.getAttribute("required");null!=e&&"false"!==e.toLowerCase()&&t.AddValidator("required");var n=t.Element.getAttribute("minlength");null!=n&&(n=parseInt(n),isNaN(n)||t.AddValidator(`minlength:${n}`));var s=t.Element.getAttribute("maxlength");null!=s&&(s=parseInt(s),isNaN(s)||t.AddValidator(`maxlength:${s}`));var a=t.Element.getAttribute("pattern");null!=a&&""!==a.trim()&&t.AddValidator(`pattern:${a}`);var r=t.Element.getAttribute("validators");if(null!=r){r=r.split(",");for(var i=0;i<r.length;i++){var o=r[i].trim();t.AddValidator(o)}}}(this)}SetEditingMode(t){!function(t,e){var n=e?"true":"false";t.Nodes.Input.setAttribute("editmode",n),t.Nodes.Container.setAttribute("editmode",n),e?t.Element.removeAttribute("readonly"):t.Element.setAttribute("readonly","true")}(this,t)}NewData(){var t,e;e="",(t=this).Value=e,t.Nodes.LastValue.value=e}AcceptChanges(){var t;(t=this).Nodes.LastValue.value=t.Value,t.Element.removeAttribute("changed")}Reset(){var t;(t=this).Value=t.Nodes.LastValue.value,t.Element.removeAttribute("changed")}IsChanged(){return(t=this).Nodes.LastValue.value!=t.Value;var t}Validate(){}}const a=new CustomEvent("locked"),r=new CustomEvent("unlocked");function i(t,e){var n=t.Element,s=!e;for(var i in t.Inputs){t.Inputs[i].SetEditingMode(s)}return e?(n.dispatchEvent(a),n.setAttribute("locked",e)):(n.dispatchEvent(r),n.removeAttribute("locked")),e}const o={info:"fgta5-icon-info",warning:"fgta5-icon-warning",error:"fgta5-icon-error",question:"fgta5-icon-question"};class d{Text="button";constructor(t){this.Text=t}}class l{static ButtonOkCancel=Object.freeze({ok:new d("Ok"),cancel:new d("Cancel")});static ButtonYesNo=Object.freeze({yes:new d("Yes"),no:new d("No")});static ButtonYesNoCancel=Object.freeze({yes:new d("Yes"),no:new d("No"),cancel:new d("Cancel")});static async Show(t,e){return await c(t,e)}static async Error(t){return await async function(t){return await c(t,{iconcss:"error"})}(t)}static async Info(t){return await async function(t){return await c(t,{iconcss:"info"})}(t)}static async Warning(t){return await async function(t){return await c(t,{iconcss:"warning"})}(t)}static async Confirm(t,e){return await async function(t,e){return e=void 0===e?l.ButtonOkCancel:e,await c(t,{iconcss:"question",buttons:e})}(t,e)}}async function c(t,e){void 0===e&&(e={});var n=function(t,e){const n=document.createElement("dialog");if(n.classList.add("fgta5-messagebox-dialog"),n.addEventListener("close",(t=>{n.parentNode.removeChild(n)})),e.title&&(n.divTitle=document.createElement("div"),n.divTitle.classList.add("fgta5-messagebox-title"),n.divTitle.innerHTML=e.title,n.appendChild(n.divTitle)),e.iconcss){var s=o[e.iconcss]?o[e.iconcss]:e.iconcss;n.divIcon=document.createElement("div"),n.divIcon.classList.add("fgta5-messagebox-icon"),n.divIcon.classList.add(s),n.appendChild(n.divIcon)}return n.divContent=document.createElement("div"),n.divContent.classList.add("fgta5-messagebox-content"),n.divContent.innerHTML=t,n.appendChild(n.divContent),n.divButtons=document.createElement("div"),n.divButtons.classList.add("fgta5-messagebox-buttonsbar"),n.appendChild(n.divButtons),document.body.appendChild(n),n}(t,e);return new Promise((t=>{if(e.buttons)for(const[s,a]of Object.entries(e.buttons)){const e=document.createElement("button");e.classList.add("fgta5-messagebox-button"),e.innerHTML=a.Text,e.addEventListener("click",(()=>{n.close(),t(s)})),n.divButtons.appendChild(e)}else{const e=document.createElement("button");e.classList.add("fgta5-messagebox-button"),e.innerHTML="Ok",e.addEventListener("click",(()=>{n.close(),t("ok")})),n.divButtons.appendChild(e)}n.showModal()}))}function u(){const t=document.createElement("dialog");return t.classList.add("fgta5-modal-message"),t.addEventListener("close",(e=>{t.parentNode.removeChild(t)})),document.body.appendChild(t),t.showModal(),t}var m=Object.freeze({__proto__:null,parseParameters:function(t){return t.reduce(((t,e)=>{const[n,s]=e.split(":");return void 0===s?t[n]=null:isNaN(s)?t[n]=s:t[n]=Number(s),t}),{})}});const p={Component:e,Form:class extends e{#s=!1;Inputs={};constructor(t){super(t),this.#a(),function(t,e){var n=document.getElementById(e);t.Id=e,t.Element=n,t.Inputs={},t.Element.addEventListener("submit",(t=>{t.preventDefault()}));for(var a=n.querySelectorAll("input"),r=0;r<a.length;r++){var i=a[r],o=i.getAttribute("fgta5-component");null!=o&&null!=i.id&&""!=i.id&&("Textbox"==o&&(t.Inputs[i.id]=new s(i.id)))}}(this,t)}Lock(t){this.#s=i(this,t)}IsLocked(){return this.#s}Reset(){!function(t){for(var e in t.Inputs){t.Inputs[e].Reset()}}(this)}AcceptChanges(){!function(t){for(var e in t.Inputs){t.Inputs[e].AcceptChanges()}}(this)}IsChanged(){return function(t){for(var e in t.Inputs){if(t.Inputs[e].IsChanged())return!0}return!1}(this)}NewData(){!function(t){for(var e in t.Inputs){t.Inputs[e].NewData()}}(this)}Render(){!function(t){for(var e in t.Inputs){t.Inputs[e].bindForm(t)}t.IsLocked()?i(t,!0):i(t,!1)}(this)}Validate(){return function(t){var e=!0;for(var n in t.Inputs){var s=t.Inputs[n];e&&=s.Validate()}return e}(this)}#a(){var t=this.Element.getAttribute("locked");null==t&&(t="false"),"true"===t.toLowerCase()?this.#s=!0:this.#s=!1}},Button:class extends e{constructor(t){var e;super(t),(e=this).Element.classList.add("fgta5-button"),e.Element.setAttribute("type","button")}#r=!1;get Disabled(){return this.#r}set Disabled(t){var e;this.#r=t,e=t,this.Element.disabled=e}},Textbox:s,MessageBox:l,MessageBoxButton:d,Modal:class{static Show(t){return u()}static Mask(t){return function(t){t=void 0===t?"Please wait ...":t;const e=u();var n=document.createElement("div");n.classList.add("fgta5-modal-loadermask-msg"),e.appendChild(n);var s=document.createElement("div");s.classList.add("fgta5-modal-loadermask-msg-icon"),s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><radialGradient id="a11" cx=".66" fx=".66" cy=".3125" fy=".3125" gradientTransform="scale(1.5)"><stop offset="0" stop-color="#575757"></stop><stop offset=".3" stop-color="#575757" stop-opacity=".9"></stop><stop offset=".6" stop-color="#575757" stop-opacity=".6"></stop><stop offset=".8" stop-color="#575757" stop-opacity=".3"></stop><stop offset="1" stop-color="#575757" stop-opacity="0"></stop></radialGradient><circle transform-origin="center" fill="none" stroke="url(#a11)" stroke-width="30" stroke-linecap="round" stroke-dasharray="200 1000" stroke-dashoffset="0" cx="100" cy="100" r="70"><animateTransform type="rotate" attributeName="transform" calcMode="spline" dur="1.8" values="360;0" keyTimes="0;1" keySplines="0 0 1 1" repeatCount="indefinite"></animateTransform></circle><circle transform-origin="center" fill="none" opacity=".2" stroke="#575757" stroke-width="30" stroke-linecap="round" cx="100" cy="100" r="70"></circle></svg>',n.appendChild(s);var a=document.createElement("div");return a.classList.add("fgta5-modal-loadermask-msg-text"),a.innerHTML=t,n.appendChild(a),e.setText=t=>{a.innerHTML=t},e}(t)}static Progress(t){return function(t){void 0===t&&(t={});const e=u();e.IsError=!1;var n=document.createElement("div");e.appendChild(n);var s=document.createElement("div");s.classList.add("fgta5-modal-progressbar-container"),e.appendChild(s);var a=document.createElement("label");a.classList.add("fgta5-modal-progressbar"),s.appendChild(a);var r=document.createElement("div");return r.classList.add("fgta5-modal-progressbar-text"),e.appendChild(r),e.setProgress=function(t,e){t>100&&(t=100),a.innerHTML=`${t}%`,a.style.width=`${t}%`,r.innerHTML=e},e.setError=function(t){e.IsError=!0,n.classList.add("fgta5-icon-error"),n.style.height="32px",n.style.marginBottom="10px",r.innerHTML=t,r.setAttribute("error","true"),a.setAttribute("error","true")},e.finish=function(n,s){if(void 0===n&&(n="Done"),void 0===s&&(s=!0),!0===t.buttonClose||e.IsError){s&&(r.style.display="none",a.style.width="100%",a.innerHTML="100%");var i=document.createElement("div");i.style.textAlign="center",i.style.marginTop="10px",i.style.marginBottom="0";var o=document.createElement("button");o.classList.add("fgta5-modal-button"),o.innerHTML=n,o.addEventListener("click",(()=>{e.close()})),i.appendChild(o),e.appendChild(i)}else e.close()},e}(t)}},Validators:m};export{p as default};
