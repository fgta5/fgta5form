class e{Id;Element;constructor(e){this.Id=e,this.Element=document.getElementById(e)}addEventListener(e,t){this.Element.addEventListener(e,t)}}class t extends e{EditingMode=!1;constructor(e){super(e)}get type(){return this.constructor.name}get value(){}set value(e){}SetEditingMode(e){}SetError(e){}GetLastValue(){}Validate(){return!0}}class r extends t{constructor(e){super(e),function(e){const t=e.Element,r=document.createElement("div"),n=document.createElement("div"),a=document.querySelector(`label[for="${e.Id}"]`);e.Wrapper=n,e.Label=a,t.classList.add("fgta5-textbox"),t.parentNode.insertBefore(n,t),n.appendChild(t),n.classList.add("fgta5-wrapper-textbox"),n.parentNode.insertBefore(r,n),r.appendChild(n),r.classList.add("fgta5-input-container"),t.addEventListener("change",(t=>{e.Validate()||t.stopImmediatePropagation()}))}(this)}get value(){return this.Element.value}set value(e){this.Element.value=e}SetEditingMode(e){!function(e,t){const r=e.Element,n=e.Wrapper;if(e.EditingMode=t,r.disabled)return;t?(r.classList.add("fgta5-input-editmode"),r.readOnly=!1,n.removeAttribute("readonly")):(r.classList.remove("fgta5-input-editmode"),r.readOnly=!0,n.setAttribute("readonly","true"))}(this,e)}SetError(e){!function(e,t){const r=e.Element,n=e.Wrapper;var a=t;void 0===t?a=r.getAttribute("errormessage"):null===t&&(a=null);a?(r.classList.add("fgta5-input-error"),n.classList.add("fgta5-input-error")):(r.classList.remove("fgta5-input-error"),n.classList.remove("fgta5-input-error"))}(this,e)}Validate(){return function(e){const t=e.Element,r=e.Wrapper,n=e.Label;var a=t.getAttribute("minlength"),s=t.getAttribute("maxlength"),i=(t.getAttribute("validator"),t.getAttribute("invalid")),o=null!=t.getAttribute("required"),d=null==e.value||""==e.value,l=n?n.innerText:null;try{if(o&&d){var u=null!=i?i:`field ${l} is required`;throw new Error(u)}if(!function(e,t,r){return!(t&&e.length<t||r&&e.length>r)}(e.value,a,s)){u=null!=i?i:`field ${l} must be at least ${a} and maximum ${s} characters long`;throw new Error(u)}if(u=void e.value)throw new Error(u);return(c=r.parentNode.querySelector(".fgta5-errormessage"))&&c.parentNode.removeChild(c),!0}catch(t){var c;return e.SetError(t.message),(c=r.parentNode.querySelector(".fgta5-errormessage"))||((c=document.createElement("div")).innerText=t.message,c.classList.add("fgta5-errormessage"),r.parentNode.appendChild(c)),!1}}(this)}}class n extends t{constructor(e){super(e),function(e){const t=document.createElement("div"),r=e.Element,n=document.querySelector(`label[for="${e.Id}"]`),a=document.createElement("input"),s=document.createElement("button"),i=document.createElement("div");e.Display=a,e.Button=s,e.Wrapper=i,e.Label=n,r.setAttribute("type","hidden"),r.classList.add("fgta5-combobox-value"),r.parentNode.insertBefore(i,r),a.setAttribute("type","text"),a.setAttribute("readonly",!0),a.setAttribute("autocomplete","off"),a.setAttribute("spellcheck","false"),a.setAttribute("placeholder",e.Element.getAttribute("placeholder")),a.classList.add("fgta5-combobox-display"),s.setAttribute("type","button"),s.classList.add("fgta5-combobox-button"),s.innerHTML='<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="5" stroke-linecap="round" stroke-linejoin="round" transform="translate(0 3)"><path d="M6 9l6 6 6-6"/></svg>',s.addEventListener("click",(()=>{})),i.append(r),i.appendChild(a),i.appendChild(s),i.classList.add("fgta5-wrapper-textbox"),i.parentNode.insertBefore(t,i),t.appendChild(i),t.classList.add("fgta5-input-container")}(this)}SetEditingMode(e){!function(e,t){if(e.EditingMode=t,e.Button.disabled)return;t?(e.Display.classList.add("fgta5-input-editmode"),e.Wrapper.removeAttribute("readonly"),e.Button.style.visibility="visible"):(e.Display.classList.remove("fgta5-input-editmode"),e.Wrapper.setAttribute("readonly","true"),e.Button.style.visibility="hidden")}(this,e)}}const a={Component:e,Form:class extends e{Inputs={};Locked=!1;constructor(e){super(e),function(e,t){e.Id=t,e.Element=document.getElementById(t),e.Inputs={},e.Element.addEventListener("submit",(e=>{e.preventDefault()}));for(var a=e.Element.querySelectorAll("input"),s=0;s<a.length;s++){var i=a[s],o=i.getAttribute("fgta5-component");null!=o&&null!=i.id&&""!=i.id&&("Textbox"==o?e.Inputs[i.id]=new r(i.id):"Combobox"==o&&(e.Inputs[i.id]=new n(i.id)))}}(this,e)}Lock(e){!function(e,t){const r=new CustomEvent("locked"),n=new CustomEvent("unlocked");e.Locked=t;var a=!e.Locked;for(var s in e.Inputs){e.Inputs[s].SetEditingMode(a)}t?e.Element.dispatchEvent(r):e.Element.dispatchEvent(n)}(this,e)}Reset(){}AcceptChanges(){}IsChanged(){return!0}NewData(){}Render(){var e;"true"===(e=this).Element.getAttribute("locked").toLowerCase()&&e.Lock(!0)}},Button:class extends e{constructor(e){var t;super(e),(t=this).Element.classList.add("fgta5-button"),t.Element.setAttribute("type","button")}#e=!1;get Disabled(){return this.#e}set Disabled(e){var t;this.#e=e,t=e,this.Element.disabled=t}},Textbox:r,Combobox:n};export{a as default};
