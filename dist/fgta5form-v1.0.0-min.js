/*! fgta5form 1.0.0
* https://github.com/fgta5/fgta5form 
* extending standard html form
*
* Agung Nugroho DW
* https://github.com/agungdhewe
*
* build at 2025-06-11
*/
let e=0;class t{Id;Element;constructor(e){null!=e&&(this.Id=e,this.Element=document.getElementById(e))}static GenerateId(){return"comp-"+ ++e}}class n extends t{constructor(e){super(e),function(e){const t=document.createElement("div"),n=document.createElement("input");n.setAttribute("type","hidden"),n.classList.add("fgta5-entry-lastvalue"),t.classList.add("fgta5-entry-container"),e.InitialValue="",e.Element.getInputCaption=()=>e.Id,e.Listener=new EventTarget,e.Nodes={Input:e.Element,Container:t,LastValue:n}}(this),this._readValidators()}get Type(){return this.constructor.name}get Value(){return this.Element.value}set Value(e){this.Element.value=e}get Disabled(){return this.Element.disabled}set Disabled(e){this.Element.disabled=e}#e;get Form(){return this.#e}bindForm(e){this.#e=e}#t=!0;get InEditMode(){return this.#t}SetEditingMode(e){this.#t=e}#n={};get InvalidMessages(){return this.#n}_readValidators(){let e=this.Element;var t="invalid-message";Array.from(e.attributes).forEach((e=>{if(e.name.startsWith(t)){var n=e.name===t?"default":e.name.replace(`${t}-`,"");this.#n[n]=e.value}})),i(this)}NewData(e){!function(e,t){e.Value=t,e.AcceptChanges()}(this,e)}AcceptChanges(){var e;(e=this)._setLastValue(e.Nodes.Input.value),e.Nodes.Input.removeAttribute("changed"),e.SetError(null)}Reset(){var e;(e=this).Nodes.Input.value=e.Nodes.LastValue.value,e.AcceptChanges()}IsChanged(){return(e=this).Nodes.LastValue.value!=e.Nodes.Input.value;var e}SetError(e){!function(e,t){var n=e.Nodes.Container.querySelector(".fgta5-entry-error");null!==t&&""!==t?(e.Nodes.Input.setAttribute("invalid","true"),n||((n=document.createElement("div")).classList.add("fgta5-entry-error"),e.Nodes.Container.insertBefore(n,e.Nodes.InputWrapper.nextSibling)),n.innerHTML=t):(e.Nodes.Input.removeAttribute("invalid"),n&&n.remove())}(this,e)}_setLastValue(e){!function(e,t){e.Nodes.LastValue.value=t}(this,e)}GetLastValue(){return this.Nodes.LastValue.value}GetBindingData(){var e=this.Element.getAttribute("binding");return null===e?null:e}Validate(){return function(e){const t="required";if(null!=e.Validators[t]){if(null!=(n=a(e,t)))return e.SetError(n.message),!1}for(const r in e.Validators){var n;if(r!=t)if(null!=(n=a(e,r)))return e.SetError(n.message),!1}return e.SetError(null),!0}(this)}#a={};get Validators(){return this.#a}AddValidator(e,t,n){this.#a[e]={param:t,message:n}}RemoveValidator(e){void 0!==this.#a[e]&&delete this.#a[e]}ClearValidators(){this.#a={}}ReadValidators(){i(this)}_setupDescription(){var e=this.Element.getAttribute("description");if(null!==e&&""!==e.trim()){e=e.trim();const t=document.createElement("div");t.classList.add("fgta5-entry-description"),t.innerHTML=e,this.Nodes.Container.appendChild(t)}}#r=!1;IsRequired(){return this.#r}MarkAsRequired(e){this.#r=e,function(e,t){var n="required",a=e.Nodes.Label;null!=a&&null!=a&&(t?(e.Nodes.Label.setAttribute(n,""),e.Nodes.Input.setAttribute(n,""),e.AddValidator(n,null,e.InvalidMessages[n])):(e.Nodes.Label.removeAttribute(n),e.Nodes.Input.removeAttribute(n),e.RemoveValidator(n)))}(this,e)}addEventListener(e,t){this.Listener.addEventListener(e,t)}#i={};get Handlers(){return this.#i}Handle(e,t){this.#i[e]=t}}function a(e,t){const n=e.Validators[t],a=$validators[t],r=n.param,i=n.message,s=e.Nodes.Input;try{var d;if("function"!=typeof a)throw new Error(`Validator function '${t}' is not defined or not a function`);if(!a(s.value,r)){var o=e.InvalidMessages.default;throw null!=i?new Error(i):null!=o?new Error(o):new Error(`Invalid value '${s.value}' for '${s.getInputCaption()}' using validator '${t}(${r??""})'`)}return null}catch(d){return d}}function r(e){e.setHours(0),e.setMinutes(0),e.setSeconds(0)}function i(e){const t=e.Nodes.Input.getAttribute("fgta5-component");var n="";n="minlength";var a=e.Nodes.Input.getAttribute(n);null!=a&&(a=parseInt(a),isNaN(a)||e.AddValidator(n,a,e.InvalidMessages[n])),n="maxlength";var i=e.Nodes.Input.getAttribute(n);null!=i&&(i=parseInt(i),isNaN(i)||e.AddValidator(n,i,e.InvalidMessages[n])),n="pattern";var s=e.Nodes.Input.getAttribute(n);null!=s&&""!==s.trim()&&e.AddValidator("pattern",s,e.InvalidMessages[n]),n="min";var d=e.Nodes.Input.getAttribute(n);if(null!=d){var o=e.InvalidMessages[n];if("Datepicker"==t){var l=new Date(d);r(l),e.AddValidator("mindate",l,o)}else if("Timepicker"==t){var u=d;e.AddValidator("mintime",u,o)}else d=parseInt(d),isNaN(d)||e.AddValidator(n,d,o)}n="max";var c=e.Nodes.Input.getAttribute(n);if(null!=c){o=e.InvalidMessages[n];if("Datepicker"==t){var p=new Date(c);r(p),e.AddValidator("maxdate",p,o)}else if("Timepicker"==t){var m=c;e.AddValidator("maxtime",m,o)}else c=parseInt(c),isNaN(c)||e.AddValidator(n,c,o)}var v=e.Nodes.Input.getAttribute("validator");if(null!=v&&""!==v.trim()){v=v.split(",");for(var h=0;h<v.length;h++){var b=v[h].trim(),{fnName:g,fnParams:f}=$fgta5.Validators.parseFunctionParam(b);e.AddValidator(g,f,e.InvalidMessages[g])}}}class s extends n{constructor(e){super(e),function(e,t){const n=e.Nodes.Container,a=e.Nodes.LastValue,r=e.Nodes.Input,i=document.createElement("div"),s=document.querySelector(`label[for="${t}"]`);r.parentNode.insertBefore(n,r),i.appendChild(r),n.appendChild(i),n.appendChild(a),e.Nodes.InputWrapper=i,e.Nodes.Label=s,n.setAttribute("fgta5-component","Textbox"),i.classList.add("fgta5-entry-input-wrapper"),r.classList.add("fgta5-entry-input"),r.getInputCaption=()=>s.innerHTML,s.classList.add("fgta5-entry-label"),e._setLastValue(e.Value),e._setupDescription(),""!==r.style.backgroundColor&&(i.style.backgroundColor=r.style.backgroundColor,r.style.backgroundColor="transparent");var d=r.getAttribute("character-case");null!==d&&""!==d.trim()&&(r.charCase=d.trim().toLowerCase());var o=r.getAttribute("required");null!=o&&e.MarkAsRequired(!0);r.addEventListener("input",(t=>{e.GetLastValue()!=e.Value?r.setAttribute("changed","true"):r.removeAttribute("changed"),e.Listener.dispatchEvent(new CustomEvent("input",{}))})),r.addEventListener("blur",(t=>{!function(e){e.InEditMode&&(e.SetError(null),e.Validate())}(e),e.Listener.dispatchEvent(new CustomEvent("blur",{}))})),r.addEventListener("keydown",(t=>{const n=(a={cancelable:!0,key:t.key,code:t.code,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,srcElement:t.srcElement,target:t.target},new KeyboardEvent("keydown",a));var a;e.Listener.dispatchEvent(n),n.defaultPrevented&&t.preventDefault()}))}(this,e)}get Value(){return t=(e=this).Nodes.Input,d(e,t.value);var e,t}set Value(e){!function(e,t){null==t&&(t="");e.Element.value=d(e,t)}(this,e)}#t=!0;get InEditMode(){return this.#t}SetEditingMode(e){this.#t=e,function(e,t){var n=t?"true":"false";e.Nodes.Input.setAttribute("editmode",n),e.Nodes.InputWrapper.setAttribute("editmode",n),t?e.Nodes.Input.removeAttribute("readonly"):(e.Nodes.Input.setAttribute("readonly","true"),e.SetError(null))}(this,e)}NewData(e){super.NewData(e)}GetLastValue(){return t=(e=this).Nodes.LastValue.value,d(e,t);var e,t}IsChanged(){return t=(e=this).GetLastValue(),e.Value!=t;var e,t}}function d(e,t){var n=t,a=e.Nodes.Input;return"uppercase"===a.charCase?n=t.toUpperCase():"lowercase"===a.charCase&&(n=t.toLowerCase()),n}const o=e=>new CustomEvent("change",e);class l extends n{constructor(e){super(e),this.formatterFixed=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),function(e,t){const n=e.Nodes.Container,a=e.Nodes.LastValue,r=e.Nodes.Input,i=document.createElement("div"),s=document.createElement("input"),d=document.querySelector(`label[for="${t}"]`);r.parentNode.insertBefore(n,r),i.appendChild(s),i.appendChild(r),n.appendChild(i),n.appendChild(a),e.Nodes.InputWrapper=i,e.Nodes.Label=d,e.Nodes.Display=s,n.setAttribute("fgta5-component","Numberbox"),i.classList.add("fgta5-entry-input-wrapper");var{precision:l,step:u}=function(e){null!==e&&""!==e.trim()?(e=parseInt(e.trim()),(isNaN(e)||e<0)&&(e=0)):e=0;var t=Math.pow(10,-e);return{precision:e,step:t}}(e.Element.getAttribute("precision"));e.formatterFixed.minimumFractionDigits=l,e.formatterFixed.maximumFractionDigits=l,r.classList.add("fgta5-entry-input"),r.maxlength=r.getAttribute("maxlength"),r.precision=l,r.setAttribute("type","hidden"),r.setAttribute("step",u),r.getInputCaption=()=>d.innerHTML,s.id=e.Id+"-display",s.min=r.min,s.max=r.max,s.maxlength=r.maxlength,s.required=r.required,s.value=e.formatterFixed.format(r.value),s.classList.add("fgta5-entry-display"),s.setAttribute("precision",l),s.setAttribute("step",u),s.setAttribute("style",r.getAttribute("style")||""),s.setAttribute("type","text"),s.setAttribute("fgta5-component","Numberbox"),d.setAttribute("for",s.id),d.classList.add("fgta5-entry-label");var c=r.getAttribute("required");null!=c&&e.MarkAsRequired(!0);null!==r.value&&""!==r.value||(r.value=0);e._setLastValue(r.value),e._setupDescription(),s.addEventListener("focus",(t=>{!function(e){var t=e.Nodes.Display,n=e.Nodes.Input;if(e.InEditMode){t.setAttribute("type","number");var a=Number(n.value);t.value=a}}(e)})),s.addEventListener("blur",(t=>{!function(e){var t=e.Nodes.Display,n=e.Nodes.Input;if(e.InEditMode){var a=Number(t.value);if(isNaN(a))e.Listener.dispatchEvent(o({detail:{invalid:!0}})),e.SetError("Invalid number");else{e.SetError(null),n.value=a;var r=!e.Validate(),i=e.formatterFixed.format(a);t.setAttribute("type","text"),t.value=i,e.Listener.dispatchEvent(o({detail:{invalid:r,value:a,formatted:i}}))}}}(e)})),s.addEventListener("input",(e=>{s.value!==a.value?s.setAttribute("changed","true"):s.removeAttribute("changed")})),s.addEventListener("keydown",(e=>{"number"!==s.type||"ArrowUp"!==e.key&&"ArrowDown"!==e.key||e.preventDefault()}));var p=s.maxlength;null!==p&&""!==p.trim()&&(p=parseInt(p.trim()),!isNaN(p)&&p>0&&s.addEventListener("beforeinput",(e=>{e.target.value.length>=p&&"deleteContentBackward"!==e.inputType&&"deleteContentForward"!==e.inputType&&e.preventDefault()})))}(this,e)}get Value(){return Number(this.Nodes.Input.value)}set Value(e){!function(e,t){e.Nodes.Input.value=t,isNaN(t)&&(t=Number(t));var n=e.formatterFixed.format(t);"text"===e.Nodes.Display.type?e.Nodes.Display.value=n:e.Nodes.Display.value=num;!function(e){var t=e.Nodes.Input,n=e.Nodes.Display;e.Value!=e.GetLastValue()?(t.setAttribute("changed","true"),n.setAttribute("changed","true")):(t.removeAttribute("changed"),n.removeAttribute("changed"))}(e)}(this,e)}get Disabled(){return this.Element.disabled}set Disabled(e){this.Element.disabled=e,function(e,t){e.Nodes.Display.disabled=!!t}(this,e)}#t=!0;get InEditMode(){return this.#t}SetEditingMode(e){this.#t=e,function(e,t){var n=t?"true":"false";e.Nodes.Display.setAttribute("editmode",n),e.Nodes.Input.setAttribute("editmode",n),e.Nodes.InputWrapper.setAttribute("editmode",n),t?(e.Nodes.Input.removeAttribute("readonly"),e.Nodes.Display.removeAttribute("readonly")):(e.Nodes.Input.setAttribute("readonly","true"),e.Nodes.Display.setAttribute("readonly","true"),e.SetError(null))}(this,e)}NewData(e){null==e&&(e=0),super.NewData(e)}AcceptChanges(){super.AcceptChanges(),this.Nodes.Display.removeAttribute("changed")}Reset(){var e;super.Reset(),(e=this).Value=e.GetLastValue()}SetError(e){super.SetError(e),function(e,t){var n=e.Nodes.Display;null!==t&&""!==t?n.setAttribute("invalid","true"):n.removeAttribute("invalid")}(this,e)}GetLastValue(){return Number(this.Nodes.LastValue.value)}}class u extends n{constructor(e){super(e),function(e,t){const n=e.Nodes.Container,a=e.Nodes.LastValue,r=e.Nodes.Input,i=document.querySelector(`label[for="${t}"]`),s=document.createElement("label");r.parentNode.insertBefore(n,r),s.appendChild(r),s.appendChild(document.createTextNode(i.innerHTML)),n.appendChild(s),n.appendChild(a),e.Nodes.Label=i,n.setAttribute("fgta5-component","Checkbox"),r.classList.add("fgta5-checkbox-input"),s.classList.add("fgta5-checkbox");var d=document.createElement("div");d.innerHTML="&nbsp",d.style.display="inline-block",d.setAttribute("label",""),i.parentNode.replaceChild(d,i),e._setLastValue(e.Element.checked),r.addEventListener("change",(t=>{!function(e){var t=e.Nodes.Input;t.value=t.checked?1:0,e.GetLastValue()!=e.Value?t.setAttribute("changed","true"):t.removeAttribute("changed");t.checked?e.Listener.dispatchEvent(new CustomEvent("checked",{})):e.Listener.dispatchEvent((e=>new CustomEvent("unchecked",e))({}))}(e)}))}(this,e)}get Value(){return this.Element.checked}set Value(e){!function(e,t){var n=e.Nodes.Input,a=c(t);n.checked=a,n.value=a?1:0;!function(e){var t=e.Nodes.Input;e.Value!=e.GetLastValue()?t.setAttribute("changed","true"):t.removeAttribute("changed")}(e)}(this,e)}get Disabled(){return function(e){var t=e.Nodes.Input.getAttribute("permanent-disabled");if(null===t)return!1;if("true"===t)return!0;return!1}(this)}set Disabled(e){this.Element.disabled=e,function(e,t){var n=e.Nodes.Input,a=n.getAttribute("editmode"),r=null!=a&&""!=a&&"false"!=a;t?(n.setAttribute("permanent-disabled","true"),n.parentNode.setAttribute("permanent-disabled","true")):(n.removeAttribute("permanent-disabled"),n.parentNode.removeAttribute("permanent-disabled"),r||(n.disabled=!0))}(this,e)}#t=!0;get InEditMode(){return this.#t}SetEditingMode(e){this.#t=e,function(e,t){var n=e.Nodes.Input,a=t?"true":"false",r=n.getAttribute("permanent-disabled"),i=null!=r&&""!=r&&"false"!=r;n.setAttribute("editmode",a),t?i?n.setAttribute("disabled","true"):n.removeAttribute("disabled"):n.setAttribute("disabled","true")}(this,e)}NewData(e){super.NewData(e),function(e,t){var n=c(t);e.Value=n,e._setLastValue(n)}(this,e)}GetLastValue(){return c(this.Nodes.LastValue.value)}IsChanged(){return t=(e=this).GetLastValue(),e.Value!=t;var e,t}Reset(){var e,t;t=(e=this).GetLastValue(),e.Value=t,e._setLastValue(t)}_setLastValue(e){!function(e,t){var n=1;"off"!==t&&"0"!==t&&0!==t&&!1!==t||(n=0);e.Nodes.LastValue.value=n}(this,e)}}function c(e){return 0!==e&&"0"!==e&&!1!==e&&void 0!==e}const p='<svg transform="translate(0 3)" width="12" height="12" stroke="currentColor" stroke-linecap="round" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n\t\t<rect x="1.3095" y="6.6682" width="21.393" height="1.8579" fill="none" stroke-width="2"/>\n\t\t<rect x=".81949" y="10" width="22.341" height="13.251" fill="none" stroke-width="1.02"/>\n\t\t<rect x="3.8664" y="1.1531" width="2.5776" height="1.4923" fill="none" stroke-width="2"/>\n\t\t<rect x="17.223" y="1.1203" width="2.5776" height="1.6958" fill="none" stroke-width="2"/>\n\t\t<path d="m1.2888 16.278 21.367-0.13566" fill="none" stroke-width="1.02"/>\n\t\t<path d="m8.2775 10.07-0.13566 12.888" fill="none" stroke-width="1.02"/>\n\t\t<path d="m15.799 9.9671-0.13566 12.888" fill="none" stroke-width="1.02"/>\n\t\t</svg>';class m extends n{constructor(e){super(e),function(e,t){const n=e.Nodes.Container,a=e.Nodes.LastValue,r=e.Nodes.Input,i=document.createElement("div"),s=document.createElement("input"),d=document.createElement("button"),o=document.querySelector(`label[for="${t}"]`);r.parentNode.insertBefore(n,r),i.appendChild(s),i.appendChild(d),d.appendChild(r),n.appendChild(i),n.appendChild(a),e.Nodes.InputWrapper=i,e.Nodes.Label=o,e.Nodes.Display=s,e.Nodes.Button=d,n.setAttribute("fgta5-component","Datepicker"),i.classList.add("fgta5-entry-input-wrapper"),s.setAttribute("id",`${t}-display`),s.setAttribute("type","text"),s.setAttribute("fgta5-component","Datepicker"),s.setAttribute("readonly","true"),s.classList.add("fgta5-entry-display"),s.classList.add("fgta5-entry-display-datepicker");var l=r.getAttribute("placeholder");null!=l&&""!=l&&s.setAttribute("placeholder",l);var u=r.getAttribute("class");null!=u&&""!=u&&s.setAttribute("class",u);var c=r.getAttribute("style");null!=c&&""!=c&&s.setAttribute("style",c);r.setAttribute("type","date"),r.removeAttribute("class"),r.removeAttribute("style"),r.classList.add("fgta5-entry-input"),r.classList.add("fgta5-entry-input-datepicker"),r.getInputCaption=()=>o.innerHTML,d.id=e.Id+"-button",d.insertAdjacentHTML("beforeend",p),d.classList.add("fgta5-entry-button-datepicker"),o.setAttribute("for",d.id),o.classList.add("fgta5-entry-label");var m=r.getAttribute("required");null!=m&&e.MarkAsRequired(!0);null!=r.value&&""!=r.value&&(e.Value=r.value,e._setLastValue(r.value),e.AcceptChanges());e._setupDescription(),r.addEventListener("change",(t=>{!function(e){var t=e.Nodes.Input;h(e,t.value),v(e),e.InEditMode&&(e.SetError(null),e.Validate())}(e)}))}(this,e)}get Value(){return""==(n=this).Nodes.Input.value?null:("string"==typeof(e=n.Nodes.Input.value)?t=new Date(e):e instanceof Date&&(t=e),t.toISOString().split("T")[0]);var e,t,n}set Value(e){var t,n;n=e,(t=this).Nodes.Input.value=n,h(t,n),v(t)}get Min(){return""!=this.Element.min?new Date(this.Element.min):null}set Min(e){e instanceof Date?this.Element.min=e.toISOString().split("T")[0]:"string"==typeof e&&(this.Element.min=e)}get Max(){return""!=this.Element.max?new Date(this.Element.max):null}set Max(e){e instanceof Date?this.Element.max=e.toISOString().split("T")[0]:"string"==typeof e&&(this.Element.max=e)}get Disabled(){return this.Element.disabled}set Disabled(e){this.Element.disabled=e,function(e,t){var n=e.Nodes.Display,a=e.Nodes.InputWrapper,r=e.Nodes.Button;t?(n.disabled=!0,a.setAttribute("disabled","true"),r.setAttribute("disabled","true")):(n.disabled=!1,a.removeAttribute("disabled"),r.removeAttribute("disabled"))}(this,e)}#t=!0;get InEditMode(){return this.#t}SetEditingMode(e){this.#t=e,function(e,t){var n=t?"true":"false",a=e.Nodes.Input,r=e.Nodes.Display,i=e.Nodes.InputWrapper;r.setAttribute("editmode",n),a.setAttribute("editmode",n),i.setAttribute("editmode",n),t?a.removeAttribute("readonly"):(a.setAttribute("readonly","true"),e.SetError(null))}(this,e)}NewData(e){null==e&&(e=""),super.NewData(e)}AcceptChanges(){super.AcceptChanges(),this.Nodes.Display.removeAttribute("changed")}Reset(){var e,t;super.Reset(),t=(e=this).GetLastValue(),e.Value=null==t?"":t}SetError(e){super.SetError(e),function(e,t){var n=e.Nodes.Display;null!==t&&""!==t?n.setAttribute("invalid","true"):n.removeAttribute("invalid")}(this,e)}GetLastValue(){return""==(e=this.Nodes.LastValue.value)?null:e;var e}}function v(e){var t=e.Nodes.Display;e.Value!=e.GetLastValue()?t.setAttribute("changed","true"):t.removeAttribute("changed")}function h(e,t){var n=e.Nodes.Display;if(""==t)n.value="";else{const e={day:"2-digit",month:"short",year:"numeric"},a=new Date(t).toLocaleDateString("en-ID",e).replace(".","");n.value=a}}const b=/^([01]\d|2[0-3]):([0-5]\d)$/,g='<?xml version="1.0" encoding="UTF-8"?>\n<svg transform="translate(0 3)" width="12" height="12" stroke="currentColor" stroke-linecap="round" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n<path d="m12.339 12.142 0.01403-6.5322" fill="none" stroke-width="2"/>\n<path d="m8.4232 14.469 3.7103-1.9861" fill="none" stroke-width="2.4"/>\n<ellipse cx="12.004" cy="11.983" rx="10.102" ry="9.9964" fill="none" stroke-width="2.4"/>\n</svg>\n\n';class f extends n{constructor(e){super(e),function(e,t){const n=e.Nodes.Container,a=e.Nodes.LastValue,r=e.Nodes.Input,i=document.createElement("div"),s=document.createElement("input"),d=document.createElement("button"),o=document.querySelector(`label[for="${t}"]`);r.parentNode.insertBefore(n,r),i.appendChild(s),i.appendChild(d),d.appendChild(r),n.appendChild(i),n.appendChild(a),e.Nodes.InputWrapper=i,e.Nodes.Label=o,e.Nodes.Display=s,e.Nodes.Button=d,n.setAttribute("fgta5-component","Timepicker"),i.classList.add("fgta5-entry-input-wrapper"),s.setAttribute("id",`${t}-display`),s.setAttribute("type","text"),s.setAttribute("picker","time"),s.setAttribute("fgta5-component","Timepicker"),s.setAttribute("readonly","true"),s.classList.add("fgta5-entry-display"),s.classList.add("fgta5-entry-display-datepicker");var l=r.getAttribute("placeholder");null!=l&&""!=l&&s.setAttribute("placeholder",l);var u=r.getAttribute("class");null!=u&&""!=u&&s.setAttribute("class",u);var c=r.getAttribute("style");null!=c&&""!=c&&s.setAttribute("style",c);r.setAttribute("type","time"),r.setAttribute("picker","time"),r.removeAttribute("class"),r.removeAttribute("style"),r.classList.add("fgta5-entry-input"),r.classList.add("fgta5-entry-input-datepicker"),r.getInputCaption=()=>o.innerHTML,d.id=e.Id+"-button",d.insertAdjacentHTML("beforeend",g),d.classList.add("fgta5-entry-button-datepicker"),o.setAttribute("for",d.id),o.classList.add("fgta5-entry-label");var p=r.getAttribute("required");null!=p&&e.MarkAsRequired(!0);null!=r.value&&""!=r.value||(r.value="00:00");e.Value=r.value,e._setLastValue(r.value),e.AcceptChanges(),e._setupDescription(),r.addEventListener("change",(t=>{!function(e){var t=e.Nodes.Input;y(e,t.value),A(e),e.InEditMode&&(e.SetError(null),e.Validate())}(e)}))}(this,e)}get Min(){return this.Element.min}set Min(e){this.Element.min=e}get Max(){return this.Element.max}set Max(e){this.Element.max=e}get Value(){return""==(e=this.Nodes.Input).value?null:e.value;var e}set Value(e){!function(e,t){if(!b.test(t))throw new Error(`invalid HH:ss format for '${t}'`);e.Nodes.Input.value=t,y(e,t),A(e)}(this,e)}get Disabled(){return this.Element.disabled}set Disabled(e){this.Element.disabled=e,function(e,t){var n=e.Nodes.Display,a=e.Nodes.InputWrapper,r=e.Nodes.Button;t?(n.disabled=!0,a.setAttribute("disabled","true"),r.setAttribute("disabled","true")):(n.disabled=!1,a.removeAttribute("disabled"),r.removeAttribute("disabled"))}(this,e)}#t=!0;get InEditMode(){return this.#t}SetEditingMode(e){this.#t=e,function(e,t){var n=t?"true":"false",a=e.Nodes.Input,r=e.Nodes.Display,i=e.Nodes.InputWrapper;r.setAttribute("editmode",n),a.setAttribute("editmode",n),i.setAttribute("editmode",n),t?a.removeAttribute("readonly"):(a.setAttribute("readonly","true"),e.SetError(null))}(this,e)}NewData(e){""!=e&&null!=e||(e="00:00"),super.NewData(e)}AcceptChanges(){super.AcceptChanges(),this.Nodes.Display.removeAttribute("changed")}Reset(){var e,t;super.Reset(),t=(e=this).GetLastValue(),e.Value=null==t?"":t}SetError(e){super.SetError(e),function(e,t){var n=e.Nodes.Display;null!==t&&""!==t?n.setAttribute("invalid","true"):n.removeAttribute("invalid")}(this,e)}GetLastValue(){return""==(e=this.Nodes.LastValue.value)?null:e;var e}}function A(e){var t=e.Nodes.Display;e.Value!=e.GetLastValue()?t.setAttribute("changed","true"):t.removeAttribute("changed")}function y(e,t){e.Nodes.Display.value=t}const N=e=>new CustomEvent("selecting",e),E='<?xml version="1.0" encoding="UTF-8"?>\n<svg transform="translate(0 3)" width="12" height="12" stroke-linecap="round" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n<path transform="matrix(.8169 0 0 -.64538 10.987 14.119)" d="m11.299 11.275h-10.157l-10.157-1e-6 10.157-17.593 5.0786 8.7965z"/>\n</svg>\n',L='<?xml version="1.0" encoding="UTF-8"?>\n<svg transform="translate(0 3)" width="12" height="12" stroke="currentColor" stroke-linecap="round" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n<path d="m3.5642 20.295 16.853-16.833" fill="none" stroke-width="4"/>\n<path d="m3.5741 3.4523 16.833 16.853" fill="none" stroke-width="4"/>\n</svg>',I="editmode",w="showed",C="removing",x="selected";class D extends n{constructor(e){super(e),function(e,t){const n=e.Nodes.Container,a=e.Nodes.LastValue,r=e.Nodes.Input,i=document.createElement("div"),s=document.createElement("input"),d=document.createElement("button"),o=document.querySelector(`label[for="${t}"]`),l=r.parentNode.querySelector(`datalist[for="${t}"]`),u=document.createElement("dialog"),c=document.createElement("input");r.parentNode.insertBefore(n,r),i.appendChild(r),i.appendChild(s),i.appendChild(d),n.appendChild(i),n.appendChild(a),n.appendChild(c),n.appendChild(u),e.Nodes.InputWrapper=i,e.Nodes.Label=o,e.Nodes.Display=s,e.Nodes.Button=d,e.Nodes.Dialog=u,e.Nodes.LastText=c,n.setAttribute("fgta5-component","Combobox"),i.classList.add("fgta5-entry-input-wrapper"),r.classList.add("fgta5-entry-input"),r.setAttribute("type","hidden"),r.getInputCaption=()=>o.innerHTML,s.id=e.Id+"-display",s.classList.add("fgta5-entry-display"),s.setAttribute("style",r.getAttribute("style")||""),s.setAttribute("type","text"),s.setAttribute("readonly","true"),s.setAttribute("fgta5-component","Combobox"),s.setAttribute("placeholder",r.getAttribute("placeholder")),s.required=r.required,d.classList.add("fgta5-entry-button-combobox"),d.innerHTML=E,d.addEventListener("click",(t=>{!function(e){const t=e.Nodes.Dialog;var n=e.Nodes.Button.getAttribute(I);if("true"!==n)return;if(e.HasStaticOption)e.Listener.dispatchEvent(N({detail:{sender:e,dialog:t,searchtext:"",limit:0,offset:0,addRow:(t,n,a)=>{var r=V(e,t,n,a);tbody.appendChild(r)}}}));else{_(e,null,30,0),setTimeout((()=>{var e=t.querySelector(".fgta5-combobox-dialog-filter input");null!=e&&e.focus()}),100)}setTimeout((()=>{e.IsWaiting()&&(t.mask=$fgta5.Modal.Mask())}),1e3),t.showModal(),t.setAttribute(w,"true");var a=t.querySelector(".fgta5-combobox-dialog-head > button");null==a.onclick&&(a.onclick=n=>{t.setAttribute(C,"true"),setTimeout((()=>{t.close(),t.removeAttribute(C),t.removeAttribute(w),S(e)}),200)})}(e)})),c.setAttribute("type","hidden"),o.setAttribute("for",s.id),o.classList.add("fgta5-entry-label");var p=r.getAttribute("required");null!=p&&e.MarkAsRequired(!0);if(function(e,t){t.classList.add("fgta5-combobox-dialog");var n=document.createElement("div");n.classList.add("fgta5-combobox-dialog-head"),n.innerHTML=e.Nodes.Input.getInputCaption(),t.appendChild(n);var a=document.createElement("button");a.innerHTML=L,n.appendChild(a);var r=document.createElement("div"),i=document.createElement("input"),s=document.createElement("button"),d=document.createElement("a");i.setAttribute("placeholder","Search"),i.setAttribute("maxlength",30),i.addEventListener("keypress",(e=>{"Enter"===e.key&&s.click()})),s.innerHTML="Submit",s.addEventListener("click",(t=>{var n=i.value,a=30,r=0;d.searchtext=n,B(e),_(e,n,a,r)})),r.classList.add("fgta5-combobox-dialog-filter"),r.appendChild(i),r.appendChild(s),t.appendChild(r);var o=document.createElement("table"),l=document.createElement("thead"),u=document.createElement("tbody"),c=document.createElement("tfoot");t.appendChild(o),o.appendChild(u),o.appendChild(c),o.appendChild(l),d.classList.add("fgta5-combobox-dialog-nextbutton"),d.innerHTML="next data",d.style.display="none",d.setAttribute("href","javascript:void(0)"),d.addEventListener("click",(t=>{var n=d.searchtext,a=d.limit,r=d.nextoffset;_(e,n,a,r)})),t.appendChild(d),t.setNext=(e,t)=>{d.nextoffset=e,d.limit=t,d.style.display=null!=e&&0!=e?"inline-block":"none"}}(e,u),u.addEventListener("cancel",(t=>{u.setAttribute(C,"true"),t.preventDefault(),setTimeout((()=>{u.close(),u.removeAttribute(C),u.removeAttribute(w),S(e)}),200)})),null!=l){l.remove();var m=function(e,t,n){const a=n.getElementsByTagName("option");var r=t.getElementsByTagName("thead")[0],i=t.getElementsByTagName("tbody")[0],s=t.getElementsByTagName("tfoot")[0],d=null;if(r.style.display="none",s.style.display="none",!e.IsRequired()){var o=V(e,"","none",{});o.setAttribute("data-none",""),i.appendChild(o)}var l=0;for(let t of a){l++;let n=t.textContent||t.innerText,a=null==t.value||""==t.value?n:t.value;null!=t.getAttribute("default")&&(d={value:a,text:n}),i.appendChild(V(e,a,n,{option:t}))}return{count:l,default:d}}(e,u,l);null!=m.default&&(r.value=def.value,s.value=def.text),m.count>0&&(e.HasStaticOption=!0)}else r.value="",s.value="";e._read,e._setupDescription(),e._setLastValue(r.value,s.value)}(this,e)}get Value(){return""==(e=this.Nodes.Input).value?null:e.value;var e}set Value(e){throw Error("Value is readonly")}get Text(){return this.Nodes.Display.value}set Text(e){throw Error("Text is readonly")}get Disabled(){return this.Element.disabled}set Disabled(e){this.Element.disabled=e,function(e,t){t?(e.Nodes.Display.disabled=!0,e.Nodes.Button.disabled=!0):(e.Nodes.Display.disabled=!1,e.Nodes.Button.disabled=!1)}(this,e)}#t=!0;get InEditMode(){return this.#t}SetEditingMode(e){this.#t=e,function(e,t){var n=t?"true":"false";e.Nodes.Display.setAttribute(I,n),e.Nodes.Input.setAttribute(I,n),e.Nodes.InputWrapper.setAttribute(I,n),e.Nodes.Button.setAttribute(I,n),t?e.Nodes.Input.removeAttribute("readonly"):(e.Nodes.Input.setAttribute("readonly","true"),e.SetError(null))}(this,e)}NewData(e){!function(e,t){var n=e.Nodes.Input,a=e.Nodes.Display;void 0===t?(n.value="",a.value=""):"string"==typeof t?(n.value=t,a.value=t):null!=t?(n.value=t.value,a.value=t.text):(n.value="",n.value="");e.Nodes.Display.removeAttribute("changed"),e.SetError(null),e.AcceptChanges()}(this,e)}AcceptChanges(){var e;super.AcceptChanges(),(e=this).Nodes.Display.removeAttribute("changed"),e._setLastValue(e.Value,e.Text)}Reset(){var e;super.Reset(),(e=this).Value=e.GetLastValue(),e.Text=e.GetLastText(),e.Nodes.Display.removeAttribute("changed")}_setLastValue(e,t){super._setLastValue(e),function(e,t,n){e.Nodes.LastValue.value=t,e.Nodes.LastText.value=n}(this,e,t)}GetLastValue(){return""==(e=this.Nodes.LastValue.value)?null:e;var e}GetLastText(){return function(){return this.Nodes.LastText.value}()}SetSelected(e,t){null==t&&(t=e),function(e,t,n){e.Nodes.Input.value=t,e.Nodes.Display.value=n,k(e)}(this,e,t)}AddOptions(e){T(this,e)}SetOptions(e){!function(e,t){const n=e.Nodes.Dialog.getElementsByTagName("tbody")[0];M(e,n),e.IsRequired();T(e,t,n)}(this,e)}#s=!1;IsWaiting(){return this.#s}Wait(e){this.#s=void 0===e||e,function(e,t){const n=e.Nodes.Dialog;var a=n.getElementsByTagName("tbody")[0];if(t=void 0===t||t,t){var r=document.createElement("tr"),i=document.createElement("td");r.setAttribute("data-waiting",""),i.innerHTML="fetching data from server ...",r.appendChild(i),a.appendChild(r)}else{var s=a.querySelector("[data-waiting]");null!=s&&s.remove(),null!=n.mask&&(n.mask.close(),delete n.mask)}}(this,e)}AbortHandler=null;HasStaticOption=null}function V(e,t,n,a){let r=document.createElement("tr");var i=document.createElement("td");r.classList.add("fgta-combobox-option-row"),r.setAttribute("value",t),i.setAttribute("option",""),i.setAttribute("value",t),i.innerHTML=n,i.addEventListener("click",(i=>{!0!==e.pauseClickEvent&&(e.pauseClickEvent=!0,setTimeout((()=>{e.pauseClickEvent=!1}),500),B(e),r.setAttribute(x,""),e.Nodes.Input.value=t,e.Nodes.Display.value=n,function(e,t,n,a){e.Listener.dispatchEvent((e=>new CustomEvent("change",e))({sender:e,detail:{value:t,text:n,data:a,sender:e}})),k(e),e.Nodes.Dialog.removeAttribute(w),setTimeout((()=>{e.Nodes.Dialog.close(),S(e)}),200)}(e,t,n,a))})),r.appendChild(i),e.Listener.dispatchEvent((e=>new CustomEvent("optionformatting",e))({detail:{value:t,text:n,tr:r,data:a}}));var s=e.Value??"";return t==s&&r.setAttribute(x,""),r}function k(e){var t=e.Nodes.Display;e.Value!=e.GetLastValue()?t.setAttribute("changed","true"):t.removeAttribute("changed")}function M(e,t){const n=e.Nodes.Dialog;null!=t&&null!=t||(t=n.getElementsByTagName("tbody")[0]),t.replaceChildren()}function T(e,t,n){if(null==t||null==t)return;const a=e.Nodes.Dialog;null!=n&&null!=n||(n=a.getElementsByTagName("tbody")[0]);for(let a of t)n.appendChild(V(e,a.value,a.text,t))}function S(e){"function"==typeof e.AbortHandler&&e.AbortHandler()}function _(e,t,n,a){const r=e.Nodes.Dialog,i=r.getElementsByTagName("tbody")[0];var s=!0;0==a&&(null!=r.querySelector(`table tr[${x}]`)?s=!1:(s=!0,M(e,i),r.setNext(null)));s&&((()=>{var t=i.querySelector("tr[data-none]");if(e.IsRequired())t.remove();else if(null==t){var n=V(e,"","none",{});n.setAttribute("data-none",""),i.prepend(n)}})(),e.Listener.dispatchEvent(N({detail:{sender:e,dialog:r,searchtext:t,limit:n,offset:a,addRow:(t,n,a)=>{var r=V(e,t,n,a);i.appendChild(r)}}})))}function B(e){var t=e.Nodes.Dialog.querySelector(`table tr[${x}]`);null!=t&&t.removeAttribute(x)}const q='<?xml version="1.0" encoding="UTF-8"?>\n<svg transform="translate(0 3)" width="12" height="12" stroke="currentColor" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n<path d="m3.0207 17.447v3.9708h18.328v-3.9708" fill="none" stroke-linecap="square" stroke-width="4"/>\n<path d="m18.595 8.3606-6.4542-4.0017-6.3622 4.0017m6.3622-1.8991v7.1708" fill="none" stroke-linecap="square" stroke-width="4"/>\n</svg>\n';class H extends n{constructor(e){super(e),function(e,t){const n=e.Nodes.Container,a=e.Nodes.LastValue,r=e.Nodes.Input,i=document.createElement("div"),s=document.createElement("input"),d=document.createElement("button"),o=document.querySelector(`label[for="${t}"]`);r.parentNode.insertBefore(n,r),i.appendChild(s),i.appendChild(d),d.appendChild(r),n.appendChild(i),n.appendChild(a),e.Nodes.InputWrapper=i,e.Nodes.Label=o,e.Nodes.Display=s,e.Nodes.Button=d,n.setAttribute("fgta5-component","Filebox"),i.classList.add("fgta5-entry-input-wrapper"),s.setAttribute("id",`${t}-display`),s.setAttribute("type","text"),s.setAttribute("picker","file"),s.setAttribute("fgta5-component","Filebox"),s.setAttribute("readonly","true"),s.classList.add("fgta5-entry-display"),s.classList.add("fgta5-entry-display-filebox");var l=r.getAttribute("placeholder");null!=l&&""!=l&&s.setAttribute("placeholder",l);var u=r.getAttribute("class");null!=u&&""!=u&&s.setAttribute("class",u);var c=r.getAttribute("style");null!=c&&""!=c&&s.setAttribute("style",c);r.setAttribute("type","file"),r.setAttribute("picker","file"),r.removeAttribute("class"),r.removeAttribute("style"),r.classList.add("fgta5-entry-input"),r.classList.add("fgta5-entry-input-filebox"),r.getInputCaption=()=>o.innerHTML,d.id=e.Id+"-button",d.insertAdjacentHTML("beforeend",q),d.classList.add("fgta5-entry-button-filebox"),o.setAttribute("for",d.id),o.classList.add("fgta5-entry-label");var p=r.getAttribute("required");null!=p&&e.MarkAsRequired(!0);e._setLastValue(r.value),e.AcceptChanges(),e._setupDescription(),r.addEventListener("change",(t=>{!function(e){var t=e.Nodes.Input;if(0===t.files.length)return;e.Nodes.Display.value=t.files[0].name,function(e){var t=e.Nodes.Display;e.Value!=e.GetLastValue()?t.setAttribute("changed","true"):t.removeAttribute("changed")}(e),e.InEditMode&&(e.SetError(null),e.Validate())}(e)}))}(this,e)}get Value(){return 0===this.Element.files.length?"":this.Element.files[0].name}get Disabled(){return this.Element.disabled}set Disabled(e){this.Element.disabled=e,function(e,t){var n=e.Nodes.Display,a=e.Nodes.Button;t?(n.disabled=!0,a.disabled=!0):(n.disabled=!1,a.disabled=!1)}(this,e)}#t=!0;get InEditMode(){return this.#t}SetEditingMode(e){this.#t=e,function(e,t){var n=e.Nodes.Display,a=e.Nodes.Input,r=t?"true":"false";n.setAttribute("editmode",r),a.setAttribute("editmode",r),e.Nodes.InputWrapper.setAttribute("editmode",r),t?a.disabled=!1:(a.disabled=!0,e.SetError(null))}(this,e)}NewData(){super.NewData("")}AcceptChanges(){!function(e){var t=e.Nodes.Display,n=e.Nodes.Input,a="";n.files.length>0&&(a=n.files[0].name);e._setLastValue(a),n.removeAttribute("changed"),t.removeAttribute("changed"),e.SetError(null)}(this)}Reset(){!function(e){e.Nodes.Input.value="";var t=e.GetLastValue();e.Nodes.Display.value=t,e.AcceptChanges()}(this)}IsChanged(){return t=(e=this).Nodes.LastValue.value,e.Value!=t;var e,t}SetError(e){super.SetError(e),function(e,t){var n=e.Nodes.Display;null!==t&&""!==t?n.setAttribute("invalid","true"):n.removeAttribute("invalid")}(this,e)}}const $=new CustomEvent("locked"),G=new CustomEvent("unlocked");function R(e,t){var n=e.Element,a=!t;for(var r in e.Inputs){e.Inputs[r].SetEditingMode(a)}return t?(n.dispatchEvent($),n.setAttribute("locked",t)):(n.dispatchEvent(G),n.removeAttribute("locked")),t}const F={info:"fgta5-icon-info",warning:"fgta5-icon-warning",error:"fgta5-icon-error",question:"fgta5-icon-question"};class O{Text="button";constructor(e){this.Text=e}}class W{static ButtonOkCancel=Object.freeze({ok:new O("Ok"),cancel:new O("Cancel")});static ButtonYesNo=Object.freeze({yes:new O("Yes"),no:new O("No")});static ButtonYesNoCancel=Object.freeze({yes:new O("Yes"),no:new O("No"),cancel:new O("Cancel")});static async Show(e,t){return await j(e,t)}static async Error(e){return await async function(e){return await j(e,{iconcss:"error"})}(e)}static async Info(e){return await async function(e){return await j(e,{iconcss:"info"})}(e)}static async Warning(e){return await async function(e){return await j(e,{iconcss:"warning"})}(e)}static async Confirm(e,t){return await async function(e,t){return t=void 0===t?W.ButtonOkCancel:t,await j(e,{iconcss:"question",buttons:t})}(e,t)}}async function j(e,t){void 0===t&&(t={});var n=function(e,t){const n=document.createElement("dialog");if(n.classList.add("fgta5-messagebox-dialog"),n.addEventListener("close",(e=>{n.parentNode.removeChild(n)})),t.title&&(n.divTitle=document.createElement("div"),n.divTitle.classList.add("fgta5-messagebox-title"),n.divTitle.innerHTML=t.title,n.appendChild(n.divTitle)),t.iconcss){var a=F[t.iconcss]?F[t.iconcss]:t.iconcss;n.divIcon=document.createElement("div"),n.divIcon.classList.add("fgta5-messagebox-icon"),n.divIcon.classList.add(a),n.appendChild(n.divIcon)}return n.divContent=document.createElement("div"),n.divContent.classList.add("fgta5-messagebox-content"),n.divContent.innerHTML=e,n.appendChild(n.divContent),n.divButtons=document.createElement("div"),n.divButtons.classList.add("fgta5-messagebox-buttonsbar"),n.appendChild(n.divButtons),document.body.appendChild(n),n}(e,t);return new Promise((e=>{if(t.buttons)for(const[a,r]of Object.entries(t.buttons)){const t=document.createElement("button");t.classList.add("fgta5-messagebox-button"),t.innerHTML=r.Text,t.addEventListener("click",(()=>{n.close(),e(a)})),n.divButtons.appendChild(t)}else{const t=document.createElement("button");t.classList.add("fgta5-messagebox-button"),t.innerHTML="Ok",t.addEventListener("click",(()=>{n.close(),e("ok")})),n.divButtons.appendChild(t)}n.showModal()}))}function P(){const e=document.createElement("dialog");return e.classList.add("fgta5-modal-message"),e.addEventListener("close",(t=>{e.parentNode.removeChild(e)})),document.body.appendChild(e),e.showModal(),e}function z(e,t){var n=new Date(e);return{dt:new Date(n.getFullYear(),n.getMonth(),n.getDate()),boundary:new Date(t.getFullYear(),t.getMonth(),t.getDate())}}var K=Object.freeze({__proto__:null,getInvalidMessage:function(e,t,n){var a=t.getAttribute(`invalid-message-${e}`);return null!=a&&""!==a||(a=n),a},parseFunctionParam:function(e){const[t,...n]=e.split(":"),a=n.length>0?n.join(":"):null;return{fnName:t,fnParams:null!==a?isNaN(a)?a:Number(a):null}},required:function(e){return null!=e&&""!==e},minlength:function(e,t){return null==t||0===t||!(null==e||e.length<t)},maxlength:function(e,t){return null==t||0===t||!(null==e||e.length>t)},pattern:function(e,t){return!0},email:function(e,t){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)},min:function(e,t){return null==t||0===t||!(null==e||e<t)},max:function(e,t){return null==t||0===t||!(null==e||e>t)},mindate:function(e,t){var{dt:n,boundary:a}=z(e,t);return!(n<a)},maxdate:function(e,t){var{dt:n,boundary:a}=z(e,t);return!(n>a)},mintime:function(e,t){return!(e<t)},maxtime:function(e,t){return!(e>t)}});const U={Component:t,Form:class extends t{#d=!1;Inputs={};constructor(e){super(e),this.#o(),function(e,t){var n=document.getElementById(t);e.Id=t,e.Element=n,e.Inputs={},e.Element.setAttribute("novalidate",""),e.Element.addEventListener("submit",(e=>{e.preventDefault()}));for(var a=n.querySelectorAll("input"),r=0;r<a.length;r++){var i=a[r],d=i.getAttribute("fgta5-component");null!=d&&null!=i.id&&""!=i.id&&("Textbox"==d?e.Inputs[i.id]=new s(i.id):"Numberbox"==d?e.Inputs[i.id]=new l(i.id):"Datepicker"==d?e.Inputs[i.id]=new m(i.id):"Timepicker"==d?e.Inputs[i.id]=new f(i.id):"Combobox"==d?e.Inputs[i.id]=new D(i.id):"Checkbox"==d?e.Inputs[i.id]=new u(i.id):"Filebox"==d&&(e.Inputs[i.id]=new H(i.id)))}}(this,e)}Lock(e){this.#d=R(this,e)}IsLocked(){return this.#d}Reset(){!function(e){for(var t in e.Inputs){e.Inputs[t].Reset()}}(this)}AcceptChanges(){!function(e){for(var t in e.Inputs){e.Inputs[t].AcceptChanges()}}(this)}IsChanged(){return function(e){for(var t in e.Inputs){if(e.Inputs[t].IsChanged())return!0}return!1}(this)}NewData(e){!function(e,t){for(var n in t=null!=t?t:{},e.Inputs){var a=e.Inputs[n],r=t[a.GetBindingData()];if(a instanceof D){var i=null!=r?r:{value:"",text:""};a.NewData({value:i.value,text:i.text})}else a.NewData(r)}}(this,e)}Render(){!function(e){for(var t in e.Inputs){e.Inputs[t].bindForm(e)}e.IsLocked()?R(e,!0):R(e,!1)}(this)}Validate(){return function(e){var t=!0;for(var n in e.Inputs){var a=e.Inputs[n];t&&=a.Validate()}return t}(this)}GetData(){return function(e){var t={};for(var n in e.Inputs){var a=e.Inputs[n],r=a.GetBindingData();r&&(t[r]=a.Value)}return t}(this)}addEventListener(e,t){this.Element.addEventListener(e,t)}#o(){var e=this.Element.getAttribute("locked");null==e&&(e="false"),"true"===e.toLowerCase()?this.#d=!0:this.#d=!1}},Button:class extends t{constructor(e){var t;super(e),(t=this).Element.classList.add("fgta5-button"),t.Element.setAttribute("type","button")}#l=!1;get Disabled(){return this.#l}set Disabled(e){var t;this.#l=e,t=e,this.Element.disabled=t}addEventListener(e,t){this.Element.addEventListener(e,t)}},Textbox:s,Numberbox:l,Checkbox:u,Datepicker:m,Timepicker:f,Combobox:D,Filebox:H,MessageBox:W,MessageBoxButton:O,Modal:class{static Show(e){return P()}static Mask(e){return function(e){e=void 0===e?"Please wait ...":e;const t=P();var n=document.createElement("div");n.classList.add("fgta5-modal-loadermask-msg"),t.appendChild(n);var a=document.createElement("div");a.classList.add("fgta5-modal-loadermask-msg-icon"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><radialGradient id="a11" cx=".66" fx=".66" cy=".3125" fy=".3125" gradientTransform="scale(1.5)"><stop offset="0" stop-color="#575757"></stop><stop offset=".3" stop-color="#575757" stop-opacity=".9"></stop><stop offset=".6" stop-color="#575757" stop-opacity=".6"></stop><stop offset=".8" stop-color="#575757" stop-opacity=".3"></stop><stop offset="1" stop-color="#575757" stop-opacity="0"></stop></radialGradient><circle transform-origin="center" fill="none" stroke="url(#a11)" stroke-width="30" stroke-linecap="round" stroke-dasharray="200 1000" stroke-dashoffset="0" cx="100" cy="100" r="70"><animateTransform type="rotate" attributeName="transform" calcMode="spline" dur="1.8" values="360;0" keyTimes="0;1" keySplines="0 0 1 1" repeatCount="indefinite"></animateTransform></circle><circle transform-origin="center" fill="none" opacity=".2" stroke="#575757" stroke-width="30" stroke-linecap="round" cx="100" cy="100" r="70"></circle></svg>',n.appendChild(a);var r=document.createElement("div");return r.classList.add("fgta5-modal-loadermask-msg-text"),r.innerHTML=e,n.appendChild(r),t.setText=e=>{r.innerHTML=e},t}(e)}static Progress(e){return function(e){void 0===e&&(e={});const t=P();t.IsError=!1;var n=document.createElement("div");t.appendChild(n);var a=document.createElement("div");a.classList.add("fgta5-modal-progressbar-container"),t.appendChild(a);var r=document.createElement("label");r.classList.add("fgta5-modal-progressbar"),a.appendChild(r);var i=document.createElement("div");return i.classList.add("fgta5-modal-progressbar-text"),t.appendChild(i),t.setProgress=function(e,t){e>100&&(e=100),r.innerHTML=`${e}%`,r.style.width=`${e}%`,i.innerHTML=t},t.setError=function(e){t.IsError=!0,n.classList.add("fgta5-icon-error"),n.style.height="32px",n.style.marginBottom="10px",i.innerHTML=e,i.setAttribute("error","true"),r.setAttribute("error","true")},t.finish=function(n,a){if(void 0===n&&(n="Done"),void 0===a&&(a=!0),!0===e.buttonClose||t.IsError){a&&(i.style.display="none",r.style.width="100%",r.innerHTML="100%");var s=document.createElement("div");s.style.textAlign="center",s.style.marginTop="10px",s.style.marginBottom="0";var d=document.createElement("button");d.classList.add("fgta5-modal-button"),d.innerHTML=n,d.addEventListener("click",(()=>{t.close()})),s.appendChild(d),t.appendChild(s)}else t.close()},t}(e)}},Dataloader:class{#u;constructor(){this.#u=new AbortController}Abort(){this.#u.abort()}async Load(e,t,n){const a=this.#u.signal;null==t&&(t={});const r=Object.assign({signal:a},t);try{const t=await fetch(e,r),a=await t.json();"function"==typeof n&&n(null,a)}catch(e){"AbortError"===e.name||"function"==typeof n&&n(e,null)}}}};void 0===window.$validators?window.$validators=K:Object.assign(window.$validators,K),void 0===window.$fgta5||null===window.$fgta5?window.$fgta5=U:Object.assign(window.$fgta5,U);
